<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VITA - Visión Integral para la Transformación y el Aprendizaje</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Estilos personalizados y fuente */
        :root {
            --color-primary: #1e40af; /* Tailwind blue-700 */
            --color-secondary: #3b82f6; /* Tailwind blue-500 */
            --vita-blue-dark: #1e40af;
            --vita-blue-light: #3b82f6;
            --vita-yellow: #facc15; /* Tailwind yellow-400 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        .tab-button.active {
            border-bottom: 4px solid var(--color-secondary);
            color: var(--color-primary);
            font-weight: 600;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out; /* Animación más suave */
        }
        /* Clase para cuando el contenido se debe mostrar */
        .accordion-content.active {
            max-height: 1000px; /* Suficientemente grande para todo el currículo */
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .accordion-header svg.rotated {
            transform: rotate(180deg);
        }
        .shadow-vita {
            box-shadow: 0 10px 15px -3px rgba(30, 64, 175, 0.1), 0 4px 6px -2px rgba(30, 64, 175, 0.05);
        }
        /* Estilos para el footer en la parte inferior */
        html, body {
            height: 100%;
            margin: 0;
        }
        #app {
            display: flex;
            flex-direction: column;
            min-height: 100%;
        }
        main {
            flex-grow: 1;
        }
        /* --- Estilos del Chatbot --- */
        #chat-button {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background-color: var(--color-primary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.2s ease;
            z-index: 999;
        }
        #chat-button:hover {
            transform: scale(1.1);
        }
        #chat-window {
            position: fixed;
            bottom: 6rem;
            right: 1.5rem;
            width: 350px;
            max-width: 90vw;
            height: 450px;
            max-height: 70vh;
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform-origin: bottom right;
            z-index: 1000;
        }
        #chat-window.hidden {
            opacity: 0;
            transform: scale(0.5);
            pointer-events: none;
        }
        #chat-header {
            background-color: var(--color-primary);
            color: white;
            padding: 0.75rem 1rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            padding: 0;
        }
        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            background-color: #f9fafb; /* bg-gray-50 */
        }
        .chat-message {
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            max-width: 80%;
            font-size: 0.875rem;
            line-height: 1.4;
            white-space: pre-wrap; /* Permite saltos de línea y formateo simple como negritas */
            word-wrap: break-word;
        }
        .chat-message.bot {
            background-color: #e0e7ff; /* bg-indigo-100 */
            color: #3730a3; /* text-indigo-800 */
            align-self: flex-start;
        }
        .chat-message.user {
            background-color: var(--color-secondary);
            color: white;
            align-self: flex-end;
        }
        #chat-input-container {
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
            padding: 0.75rem;
            display: flex;
            gap: 0.5rem;
        }
        #chat-input {
            flex-grow: 1;
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            outline: none;
            min-width: 50px; /* Ensure input is not too small */
        }
        #chat-input:focus {
            border-color: var(--color-secondary);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        #chat-send {
            background-color: var(--color-primary);
            color: white;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #chat-send:hover {
            background-color: #1e3a8a; /* darker blue */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'vita-blue-dark': '#1e40af', /* blue-700 */
                        'vita-blue-light': '#3b82f6', /* blue-500 */
                        'vita-yellow': '#facc15', /* yellow-400 */
                    },
                },
            },
        }
    </script>
</head>
<body class="antialiased">
    <div id="app">
    <!-- Encabezado y Navegación -->
    <header class="bg-white shadow-vita sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row sm:justify-between sm:items-center">
            <div class="flex justify-center sm:justify-start items-center">
                <span class="text-3xl font-extrabold text-vita-blue-dark">VITA</span>
            </div>
            <!-- Navegación responsive: se ajusta y permite wrap en móviles -->
            <nav id="navbar" class="mt-4 sm:mt-0 flex flex-wrap justify-center sm:space-x-4">
                <button data-tab="inicio" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150 active">Inicio</button>
                <button data-tab="cursos" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Cursos y Malla</button>
                <button data-tab="ruta" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Rutas y municipios</button>
                <button data-tab="duracion" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Duración y Horarios</button>
                <button data-tab="certificaciones" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Certificaciones</button>
                <button data-tab="aulas" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Conoce nuestras aulas</button>
                <button data-tab="comentarios" class="tab-button px-3 py-2 text-gray-700 hover:text-vita-blue-dark transition duration-150">Comentarios</button>
                <button data-tab="registro" class="tab-button px-3 py-2 bg-vita-yellow hover:bg-yellow-500 text-vita-blue-dark font-semibold rounded-lg shadow-md transition duration-150 mt-2 sm:mt-0 ml-2">¡Regístrate!</button>
            </nav>
        </div>
    </header>

    <!-- Contenido Principal Dinámico -->
    <main class="py-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full">
        <div id="content-container">
            <!-- El contenido se cargará aquí por JavaScript -->
        </div>
    </main>

    <!-- Pie de Página -->
    <footer class="bg-vita-blue-dark text-white p-6 mt-10">
        <div class="max-w-7xl mx-auto text-center text-sm">
            &copy; <span id="current-year"></span> VITA (Visión Integral para la Transformación y el Aprendizaje). Todos los derechos reservados.
        </div>
    </footer>

    <!-- --- HTML del Chatbot --- -->
    <div id="chat-button" title="Asistente VITA">
        <!-- Icono de Chat (SVG) -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z" />
        </svg>
    </div>
    <div id="chat-window" class="hidden">
        <div id="chat-header">
            <span>Asistente VITA</span>
            <button id="close-chat" title="Cerrar">&times;</button>
        </div>
        <div id="chat-messages">
            <div class="chat-message bot">¡Hola! Soy el asistente de VITA. ¿Cómo puedo ayudarte a conocer más sobre nuestros cursos, rutas o horarios?</div>
        </div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Escribe tu pregunta...">
            <button id="chat-send">Enviar</button>
        </div>
    </div>
    
    </div> <!-- Cierre de #app -->
<script>
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    // --- DEFINICIÓN DE CONTENIDO POR PESTAÑA ---
    
    // Estructura de Malla Curricular
    const curriculums = {
        'albañileria': {
            title: 'Albañilería',
            description: 'Aprende los fundamentos de la construcción, desde la mezcla de materiales hasta el levantamiento de muros seguros y eficientes, ideal para auto-construcción y pequeñas reparaciones.',
            modules: [
                { name: 'Módulo 1: Seguridad y Materiales', content: ['Equipo de protección personal', 'Tipos de cemento, arena y cal', 'Proporciones de mezcla para mortero y concreto'] },
                { name: 'Módulo 2: Cimentación y Trazado', content: ['Nivelación y replanteo de terrenos', 'Excavación y tipos de cimentación', 'Colocación de varilla y armado de castillos'] },
                { name: 'Módulo 3: Muros y Acabados', content: ['Técnicas de pegado de ladrillo y block', 'Plomeo y nivelación de muros', 'Aplanados básicos y revoques'] },
            ]
        },
        'plomeria': {
            title: 'Plomería',
            description: 'Dominio de la instalación y reparación de sistemas hidráulicos y sanitarios, incluyendo tuberías de agua potable, desagües y la colocación de muebles de baño.',
            modules: [
                { name: 'Módulo 1: Herramientas y Tuberías', content: ['Uso seguro de cortatubos y llaves Stillson', 'Identificación de tipos de tubería (PVC, Cobre, CPVC)', 'Selladores y adhesivos'] },
                { name: 'Módulo 2: Instalaciones Hidráulicas', content: ['Circuitos de agua fría y caliente', 'Unión y soldadura de tubería de cobre', 'Instalación de tanques y calentadores de agua'] },
                { name: 'Módulo 3: Sanitarias y Desagües', content: ['Pendientes y diámetros de drenaje', 'Instalación de inodoros, lavabos y regaderas', 'Detección y reparación de fugas'] },
            ]
        },
        'carpinteria': {
            title: 'Carpintería',
            description: 'Introducción al trabajo con madera, desde el diseño y corte hasta el ensamblado de muebles básicos y reparaciones estructurales, fomentando el uso de herramientas manuales y eléctricas seguras.',
            modules: [
                { name: 'Módulo 1: Tipos de Madera y Herramientas', content: ['Clasificación de maderas (duras, blandas)', 'Uso y afilado de serruchos, cepillos y formones', 'Medición y trazado'] },
                { name: 'Módulo 2: Uniones y Ensambles', content: ['Tipos de uniones (cola de milano, espiga)', 'Uso de pegamentos y tornillos', 'Técnicas de lijado y acabado'] },
                { name: 'Módulo 3: Construcción de Muebles', content: ['Diseño y fabricación de un banco o mesa sencilla', 'Instalación de herrajes (bisagras, correderas)', 'Reparación de estructuras de madera'] },
            ]
        },
        'enfermeria': {
            title: 'Auxiliar de Enfermería',
            description: 'Capacitación en primeros auxilios, toma de signos vitales, cuidado básico de pacientes y asistencia en higiene personal, esencial para el apoyo en casa y la comunidad.',
            modules: [
                { name: 'Módulo 1: Primeros Auxilios Básicos', content: ['RCP y maniobra de Heimlich', 'Tratamiento de heridas leves y quemaduras', 'Qué hacer en caso de desmayos o convulsiones'] },
                { name: 'Módulo 2: Cuidado del Paciente', content: ['Toma y monitoreo de signos vitales (pulso, temperatura)', 'Movilización segura del paciente', 'Administración de medicamentos orales (supervisada)'] },
                { name: 'Módulo 3: Higiene y Nutrición', content: ['Técnicas de higiene y aseo del paciente', 'Prevención de úlceras por presión', 'Dietas básicas y asistencia en la alimentación'] },
            ]
        },
        'electricidad': {
            title: 'Electricidad Básica',
            description: 'Conocimientos fundamentales para realizar instalaciones eléctricas sencillas, identificar fallas comunes y garantizar la seguridad en el manejo de circuitos residenciales.',
            modules: [
                { name: 'Módulo 1: Fundamentos y Seguridad', content: ['Conceptos de voltaje, corriente y resistencia', 'Uso de multímetro', 'Normas de seguridad eléctrica y puesta a tierra'] },
                { name: 'Módulo 2: Instalaciones Residenciales', content: ['Diagramas unifilares y circuitos básicos', 'Instalación de apagadores, contactos y luminarias', 'Cálculo de calibre de cables'] },
                { name: 'Módulo 3: Detección de Fallas', content: ['Reemplazo y reparación de fusibles y pastillas', 'Identificación de cortocircuitos y sobrecargas', 'Conexión de motores sencillos'] },
            ]
        },
        'costura': {
            title: 'Costura y Confección',
            description: 'Dominio de la máquina de coser y técnicas para la creación de patrones sencillos, permitiendo la confección de prendas y artículos para el hogar con potencial de emprendimiento.',
            modules: [
                { name: 'Módulo 1: Manejo de Máquina', content: ['Enhebrado, tipos de aguja y mantenimiento', 'Tensión del hilo y puntadas básicas', 'Tipos de cierre y cremalleras'] },
                { name: 'Módulo 2: Telas, Patrones y Corte', content: ['Identificación de tipos de tela y sus usos', 'Toma de medidas y trazado de patrones simples (faldas, blusas)', 'Corte de tela y márgenes de costura'] },
                { name: 'Módulo 3: Proyectos de Emprendimiento', content: ['Confección de uniformes o artículos utilitarios', 'Arreglo y modificación de ropa (bajos, ruedos)', 'Acabados profesionales y etiquetado'] },
            ]
        },
        'estilista': {
            title: 'Estilista',
            description: 'Capacitación en técnicas básicas de corte de cabello, peinado, colorimetría y cuidado facial, con énfasis en el emprendimiento de servicios de belleza a domicilio.',
            modules: [
                { name: 'Módulo 1: Higiene y Herramientas', content: ['Salud y seguridad en el salón', 'Uso y esterilización de tijeras, navajas y peines', 'Cuidado y tipos de cabello'] },
                { name: 'Módulo 2: Corte y Peinado', content: ['Cortes básicos femeninos (recto, capas)', 'Cortes básicos masculinos (corte militar, desvanecido)', 'Técnicas de secado y moldeado'] },
                { name: 'Módulo 3: Color y Piel', content: ['Fundamentos de colorimetría y aplicación de tinte', 'Mechas y reflejos sencillos', 'Limpieza facial básica y masajes capilares'] },
            ]
        },
        'jardineria': {
            title: 'Jardinería',
            description: 'Conocimientos para el diseño, cuidado y mantenimiento de huertos y jardines. Ideal para embellecer espacios comunitarios o iniciar un negocio de paisajismo básico.',
            modules: [
                { name: 'Módulo 1: Suelos y Herramientas', content: ['Tipos de suelo y preparación de tierra', 'Uso y mantenimiento de herramientas de jardín', 'Composta y abonos orgánicos'] },
                { name: 'Módulo 2: Siembra y Riego', content: ['Técnicas de siembra directa y trasplante', 'Control de plagas y enfermedades naturales', 'Sistemas de riego eficientes (goteo)'] },
                { name: 'Módulo 3: Diseño y Mantenimiento', content: ['Poda y formación de plantas', 'Diseño de jardines sencillos (ornamentales y productivos)', 'Cuidado de césped y flores de temporada'] },
            ]
        },
    };

    // Estructura de la Ruta de Municipios
    const routeData = [
        {
            name: 'Mezquitic',
            color: 'bg-pink-800', // Rosa oscuro
            locations: [
                { name: 'Tuxpan de Bolaños', map: 'https://www.google.com/maps/d/embed?mid=1iB3jqHqCMa_o_gFfl4ejLZZEmiwr8A8&usp=sharing' },
                { name: 'Huejuquilla el Alto', map: 'https://www.google.com/maps/d/embed?mid=1NLMWVrfudgY_iE5V7mm-yQ-uDq_7r0s&usp=sharing' },
            ]
        },
        {
            name: 'Chiquilistlán',
            color: 'bg-cyan-400', // Aqua
            locations: [
                { name: 'Centro, Chiquilistlán', map: 'https://www.google.com/maps/d/embed?mid=1e8D1WQFirCuzFcKYxsFkyGl-KLvy0LU&usp=sharing' },
            ]
        },
        {
            name: 'Atemajac de Brizuela',
            color: 'bg-purple-700', // Morado
            locations: [
                { name: 'El Jazmín', map: 'https://www.google.com/maps/d/embed?mid=1eP-Y0KAD_BEae0nvLb8Tp2M0X37CjEI&usp=sharing' },
                { name: 'Lagunillas', map: 'https://www.google.com/maps/d/embed?mid=1blRR27SEQGzKDmmoLdGs7bxHtrO7yvg&usp=sharing' },
            ]
        },
        {
            name: 'Chimaltitán',
            color: 'bg-blue-900', // Azul oscuro
            locations: [
                { name: 'Centro, Chimaltitán', map: 'https://www.google.com/maps/d/embed?mid=15xYoVXHKf6ciRcBf6A-tSJTUp16l8UE&usp=sharing' },
            ]
        },
        {
            name: 'Bolaños',
            color: 'bg-red-900', // Tinto
            locations: [
                { name: 'Centro, Bolaños', map: 'https://www.google.com/maps/d/embed?mid=1wzrNF07UPscM5O6s2p6WQwU4KDPHufw&usp=sharing' },
            ]
        }
    ];
    
    // --- FUNCIONES DE RENDERIZADO DE PESTAÑAS ---
    function renderInicio() {
        return `
            <div class="space-y-8 p-6 bg-white rounded-xl shadow-lg">
                <div class="text-center">
                    <h2 class="text-4xl font-extrabold text-vita-blue-dark mb-4">¡Bienvenido a VITA!</h2>
                    <p class="text-xl text-gray-600">Visión Integral para la Transformación y el Aprendizaje</p>
                </div>
                
                <div class="bg-vita-blue-light/10 p-6 rounded-xl border-l-4 border-vita-blue-dark">
                    <h3 class="text-2xl font-semibold text-vita-blue-dark mb-3">Nuestra Misión</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Somos un proyecto dedicado a llevar <strong>rutas móviles de capacitación</strong> directamente a las comunidades rurales. Nuestro objetivo es empoderar a las personas a través del aprendizaje de oficios de alta demanda, proporcionándoles las herramientas y el conocimiento necesario para la <strong>transformación social y el autoempleo</strong>. Queremos construir un futuro donde el aprendizaje sea accesible y sirva como motor para el desarrollo económico individual y colectivo.
                    </p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 text-center">
                    <div class="p-4 bg-vita-yellow/20 rounded-lg">
                        <svg class="w-10 h-10 mx-auto text-vita-blue-dark mb-2" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"></path></svg>
                        <p class="font-semibold text-gray-700">Oficios Prácticos</p>
                    </div>
                    <div class="p-4 bg-vita-yellow/20 rounded-lg">
                        <!-- CAMBIO: Ahora sí, un ícono de camión reconocible -->
                         <svg class="w-10 h-10 mx-auto text-vita-blue-dark mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                             <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                             <circle cx="7" cy="17" r="2" />
                             <circle cx="17" cy="17" r="2" />
                             <path d="M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-4m-6 -6h1" />
                         </svg>
                         <p class="font-semibold text-gray-700">Rutas Móviles</p>
                    </div>
                    <div class="p-4 bg-vita-yellow/20 rounded-lg">
                        <svg class="w-10 h-10 mx-auto text-vita-blue-dark mb-2" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0-3.071-2.297c-.57-.281-1.225-.424-1.923-.38C12.343 16.088 11.234 16 10 16s-2.343.088-3.006.243c-.698.043-1.352-.099-1.923-.38C2.523 16.423 0 18.72 0 18.72v-1.04C0 17.13 1.57 16 3.75 16h16.5c2.18 0 3.75 1.13 3.75 1.68v1.04s-2.523-2.297-5.25-2.297Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10 12.75a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0Zm11.25 0a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0Z"></path></svg>
                        <p class="font-semibold text-gray-700">Impacto Comunitario</p>
                    </div>
                </div>
            </div>
        `;
    }

    function renderCursos() {
        let html = `
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Nuestra Oferta Educativa: Oficios para el Futuro</h2>
                <p class="text-center text-gray-600 mb-8">Haz clic en cualquier curso para desplegar su Malla Curricular completa.</p>
                <div class="space-y-4" id="curriculum-accordion">
        `;

        // Cursos ordenados alfabéticamente para mejor visualización
        const sortedCurriculums = Object.entries(curriculums).sort(([, a], [, b]) => a.title.localeCompare(b.title));

        sortedCurriculums.forEach(([key, data]) => {
            html += `
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button class="accordion-header w-full flex justify-between items-center p-4 bg-vita-blue-light hover:bg-vita-blue-light/80 transition duration-200 text-white font-semibold text-left" data-target="${key}">
                        <span>${data.title}</span>
                        <svg class="w-6 h-6 transform transition-transform duration-300" data-icon="${key}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="content-${key}" class="accordion-content bg-gray-50 px-4">
                        <div class="text-sm text-gray-700 mb-4 pt-4 border-t border-gray-200">${data.description}</div>
                        <div class="space-y-3">
                            <h4 class="font-bold text-vita-blue-dark">Malla Curricular Detallada:</h4>
                            ${data.modules.map(mod => `
                                <div class="bg-white p-3 rounded-md shadow-sm border border-vita-blue-light/50">
                                    <p class="font-semibold text-sm mb-1">${mod.name}</p>
                                    <ul class="list-disc ml-6 text-xs text-gray-600 space-y-0.5">
                                        ${mod.content.map(item => `<li>${item}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        });

        html += `
                </div>
            </div>
        `;
        return html;
    }

    function renderRuta() {
        let html = `
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Rutas y municipios</h2>
                <p class="text-center text-gray-600 mb-8">Haz clic en cada municipio para ver los puntos específicos de visita con su ubicación de Maps.</p>
                <div id="municipios-container" class="space-y-6">
        `;

        routeData.forEach((municipio) => {
            html += `
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <button class="ruta-header w-full flex justify-between items-center p-4 bg-vita-blue-dark hover:bg-vita-blue-dark/90 transition duration-200 text-white font-bold text-left" data-target="${municipio.name.replace(/\s/g, '-')}">
                        <!-- Aquí se agrega el punto de color -->
                        <span class="flex items-center">
                            <span class="w-4 h-4 rounded-full ${municipio.color} mr-3 border-2 border-white shadow-sm"></span>
                            <span>Municipio: ${municipio.name}</span>
                        </span>
                        <svg class="w-6 h-6 transform transition-transform duration-300" data-icon="${municipio.name.replace(/\s/g, '-')}-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="content-${municipio.name.replace(/\s/g, '-').toLowerCase()}" class="accordion-content bg-gray-50 px-4">
                        <h4 class="font-bold text-vita-blue-dark mb-3">Localidades a visitar:</h4>
                        <div class="space-y-4">
                            ${municipio.locations.map(loc => `
                                <div class="bg-white p-3 rounded-md shadow-sm border border-gray-200">
                                    <p class="text-sm font-medium text-gray-700 mb-2">${loc.name}</p>
                                    <div class="w-full h-64 rounded-lg overflow-hidden border border-gray-300">
                                        <iframe
                                            src="${loc.map}"
                                            width="100%"
                                            height="100%"
                                            style="border:0;"
                                            allowfullscreen=""
                                            loading="lazy"
                                            referrerpolicy="no-referrer-when-downgrade">
                                        </iframe>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        });

        html += `
                </div>
                
                <div class="mt-10 p-6 bg-vita-yellow/20 rounded-xl text-center">
                    <p class="font-semibold text-lg text-gray-800 mb-3">¡Consulta la ruta completa de nuestro viaje!</p>
                    <!-- Cambio: Se reemplaza el enlace <a> por un <iframe> para incrustar el mapa -->
                    <div class="w-full h-[450px] rounded-lg overflow-hidden border-2 border-vita-blue-dark shadow-lg mt-4">
                        <iframe
                            src="https://www.google.com/maps/d/embed?mid=1eZWNk8fu2wdRxjF8oohusnOiFEKBA2M"
                            width="100%"
                            height="100%"
                            style="border:0;"
                            allowfullscreen=""
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        `;
        return html;
    }

    function renderDuracion() {
        return `
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Duración de Cursos y Horarios Sugeridos</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Estancia y Duración -->
                    <div class="bg-vita-blue-light/10 p-6 rounded-xl border-l-4 border-vita-blue-dark">
                        <h3 class="text-2xl font-semibold text-vita-blue-dark mb-3 flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-4 4V3m-4 18h8a2 2 0 002-2V7H6v12a2 2 0 002 2zm1-12h6"></path></svg>
                            Estancia y Ciclo
                        </h3>
                        <ul class="text-gray-700 space-y-2 list-disc ml-5">
                            <li>Duración del curso (por oficio): 5 meses.</li>
                            <li>Permanencia en cada municipio: 5 meses, asegurando la finalización completa del ciclo de aprendizaje.</li>
                            <li>Intensidad Semanal: 3 sesiones por semana.</li>
                            <li>Duración por Sesión: 2 horas.</li>
                        </ul>
                        <p class="mt-4 text-sm text-gray-500 italic">Cada oficio se imparte de forma intensiva durante la estancia en cada comunidad.</p>
                    </div>

                    <!-- Horarios Sugeridos -->
                    <div class="bg-vita-yellow/20 p-6 rounded-xl border-l-4 border-vita-yellow">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-3 flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Horarios Vespertinos (Pensados para Trabajadores)
                        </h3>
                        <p class="text-gray-700 mb-4">Hemos diseñado dos opciones de horario vespertino y un turno matutino los sábados para facilitar la asistencia de quienes trabajan:</p>
                        <div class="space-y-3">
                            <div class="p-3 bg-white rounded-md shadow-md">
                                <p class="font-bold text-vita-blue-dark">Opción A (Tres veces por semana):</p>
                                <p class="text-gray-700">Lunes, Miércoles y Viernes: 6:00 PM - 8:00 PM</p>
                            </div>
                            <div class="p-3 bg-white rounded-md shadow-md">
                                <p class="font-bold text-vita-blue-dark">Opción B (Entre semana y Sábado):</p>
                                <p class="text-gray-700">Martes y Jueves: 5:30 PM - 7:30 PM</p>
                                <p class="text-gray-700">Sábado: 9:00 AM - 11:00 AM</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calendario Tentativo -->
                    <div class="md:col-span-2 bg-gray-50 p-6 rounded-xl border-l-4 border-gray-400 mt-8">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-18 0h18"></path></svg>
                            Calendario Tentativo 2026 - 2028
                        </h3>
                        <p class="text-gray-700 mb-5">La ruta está planeada para cubrir las regiones Sur y Norte en etapas, con una estancia de 5 meses por municipio.</p>
                        <ol class="relative border-l border-gray-300 space-y-4">
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-vita-blue-light rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Región Sur: Chiquilistlán</h4>
                                <p class="text-sm font-normal text-gray-500">Enero 2026 - Mayo 2026</p>
                            </li>
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-vita-blue-light rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Región Sur: Atemajac de Brizuela</h4>
                                <p class="text-sm font-normal text-gray-500">Junio 2026 - Octubre 2026</p>
                            </li>
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-gray-300 rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2.5a.5.5 0 01.5-.5h3a.5.5 0 01.5.5V17a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Receso y Preparación (GDL)</h4>
                                <p class="text-sm font-normal text-gray-500">Noviembre 2026 - Diciembre 2026</p>
                            </li>
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-vita-blue-dark rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Región Norte: Bolaños</h4>
                                <p class="text-sm font-normal text-gray-500">Enero 2027 - Mayo 2027</p>
                            </li>
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-vita-blue-dark rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Región Norte: Chimaltitán</h4>
                                <p class="text-sm font-normal text-gray-500">Junio 2027 - Octubre 2027</p>
                            </li>
                            <li class="ml-6">
                                <span class="absolute flex items-center justify-center w-6 h-6 bg-vita-blue-dark rounded-full -left-3 ring-8 ring-white">
                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <h4 class="font-semibold text-gray-900">Región Norte: Mezquitic</h4>
                                <p class="text-sm font-normal text-gray-500">Noviembre 2027 - Marzo 2028</p>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        `;
    }
    
    function renderCertificaciones() {
        return `
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-4 text-center">Nuestra Certificación Oficial</h2>
                
                <div class="text-center mb-8">
                    <img src="https://i.postimg.cc/mkkTt3Hg/LOGO-CONOCER-Vertical.jpg" alt="Logo CONOCER" class="h-40 mx-auto mb-4" onerror="this.src='https://placehold.co/240x60/f0f0f0/333?text=Logo+CONOCER'; this.onerror=null;">
                    <p class="text-xl text-gray-700 font-semibold">Certificación avalada por <br> <strong class="text-vita-blue-dark">CONOCER y la SEP</strong></p>
                </div>
                
                <div class="space-y-6 text-gray-700 leading-relaxed max-w-2xl mx-auto">
                    <div class="bg-vita-blue-light/10 p-5 rounded-lg border-l-4 border-vita-blue-light">
                        <h3 class="font-bold text-lg text-vita-blue-dark mb-2">¿Qué es CONOCER?</h3>
                        <p>El <strong>CONOCER</strong> (Consejo Nacional de Normalización y Certificación de Competencias Laborales) es una entidad del gobierno mexicano, dependiente de la <strong>Secretaría de Educación Pública (SEP)</strong>, dedicada a fortalecer la calidad de la fuerza laboral del país.</p>
                    </div>
                    
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-300">
                        <h3 class="font-bold text-lg text-gray-800 mb-2">¿Cómo funciona la certificación?</h3>
                        <p>El CONOCER no da cursos, sino que <strong>certifica las competencias</strong> que una persona ya posee, sin importar cómo las haya adquirido (trabajando, por experiencia propia o estudiando).</p>
                        <ul class="list-disc ml-6 mt-2 space-y-1 text-sm">
                            <li><strong>Evaluación Práctica:</strong> Al finalizar tu capacitación con VITA, serás evaluado en base a un <strong>Estándar de Competencia (EC)</strong> oficial.</li>
                            <li><strong>Demostración:</strong> Deberás demostrar que sabes "hacer" el oficio (albañilería, plomería, etc.) siguiendo los criterios de calidad y seguridad establecidos a nivel nacional.</li>
                            <li><strong>Documento Oficial:</strong> Si resultas "Competente", recibirás un certificado oficial con validez en toda la República Mexicana, emitido por la SEP y CONOCER.</li>
                        </ul>
                    </div>
                    
                     <div class="bg-vita-yellow/20 p-5 rounded-lg border-l-4 border-vita-yellow">
                        <h3 class="font-bold text-lg text-gray-800 mb-2">Beneficios para ti</h3>
                        <p>Esta certificación oficial impulsa tu perfil laboral, te da mayor seguridad en tu trabajo y te abre puertas a mejores oportunidades de empleo o emprendimiento, ya que comprueba formalmente que eres competente en el oficio que aprendiste.</p>
                    </div>
                </div>
            </div>
        `;
    }
    
    function renderRegistro() {
        return `
            <div class="p-6 bg-white rounded-xl shadow-lg max-w-lg mx-auto">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Pre-Registro VITA</h2>
                <p class="text-gray-600 mb-6 text-center">¡Únete a nuestra comunidad! Regístrate como participante, tallerista o voluntario.</p>
                
                <form id="registration-form" class="space-y-4" novalidate>
                    <div>
                        <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre Completo</label>
                        <input type="text" id="nombre" name="nombre" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-vita-blue-light focus:border-vita-blue-light sm:text-sm" placeholder="Ej: Juan Pérez" pattern=".{3,}" title="Mínimo 3 caracteres">
                    </div>
                    
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Correo Electrónico</label>
                        <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-vita-blue-light focus:border-vita-blue-light sm:text-sm" placeholder="ejemplo@correo.com">
                    </div>
                    
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Contraseña (Para futuros accesos)</label>
                        <input type="password" id="password" name="password" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-vita-blue-light focus:border-vita-blue-light sm:text-sm" placeholder="Mínimo 8 caracteres" pattern=".{8,}" title="La contraseña debe tener al menos 8 caracteres.">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Tipo de Registro</label>
                        <fieldset class="mt-2">
                            <legend class="sr-only">Elige tu tipo de registro</legend>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input id="tipo-participante" name="tipo-registro" type="radio" value="Participante" required class="h-4 w-4 text-vita-blue-light focus:ring-vita-blue-light border-gray-300">
                                    <label for="tipo-participante" class="ml-3 block text-sm font-medium text-gray-700">Participante (Quiero tomar un curso)</label>
                                </div>
                                <div class="flex items-center">
                                    <input id="tipo-tallerista" name="tipo-registro" type="radio" value="Tallerista" class="h-4 w-4 text-vita-blue-light focus:ring-vita-blue-light border-gray-300">
                                    <label for="tipo-tallerista" class="ml-3 block text-sm font-medium text-gray-700">Tallerista (Quiero impartir un curso)</label>
                                </div>
                                <div class="flex items-center">
                                    <input id="tipo-voluntario" name="tipo-registro" type="radio" value="Voluntario" class="h-4 w-4 text-vita-blue-light focus:ring-vita-blue-light border-gray-300">
                                    <label for="tipo-voluntario" class="ml-3 block text-sm font-medium text-gray-700">Voluntariado (Quiero apoyar)</label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div id="message-box" class="hidden p-3 rounded-md text-sm text-center font-medium" role="alert"></div>
                    
                    <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-vita-blue-dark bg-vita-yellow hover:bg-yellow-500 transition duration-150">
                        Enviar Pre-Registro
                    </button>
                </form>
            </div>
        `;
    }
    
    function renderComentarios() {
        return `
            <div class="p-6 bg-white rounded-xl shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Comentarios y Sugerencias</h2>
                <p class="text-gray-600 mb-6 text-center">Tu opinión es muy importante para nosotros. ¡Ayúdanos a mejorar!</p>
                
                <form id="comment-form" class="space-y-4 mb-8" novalidate>
                    <div>
                        <label for="comment-nombre" class="block text-sm font-medium text-gray-700">Tu Nombre</label>
                        <input type="text" id="comment-nombre" name="nombre" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-vita-blue-light focus:border-vita-blue-light sm:text-sm" placeholder="Ej: Ana Gómez">
                    </div>
                    
                    <div>
                        <label for="comment-text" class="block text-sm font-medium text-gray-700">Comentario</label>
                        <textarea id="comment-text" name="comentario" rows="4" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-vita-blue-light focus:border-vita-blue-light sm:text-sm" placeholder="Escribe tu mensaje aquí..."></textarea>
                    </div>
                    
                    <div id="comment-message-box" class="hidden p-3 rounded-md text-sm text-center font-medium" role="alert"></div>
                    
                    <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-vita-blue-dark bg-vita-yellow hover:bg-yellow-500 transition duration-150">
                        Enviar Comentario
                    </button>
                </form>

                <!-- Sección de Comentarios Existentes -->
                <div class="space-y-4">
                    <h3 class="text-xl font-semibold text-gray-800 border-b pb-2">Comentarios Recientes</h3>
                    <div id="comments-list" class="space-y-3">
                        <!-- Comentario de ejemplo -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <p class="text-sm text-gray-700">¡Me encantan los cursos que ofrecen! Ojalá pronto vengan a mi comunidad.</p>
                            <p class="text-xs text-gray-500 font-medium mt-2">- María R.</p>
                        </div>
                        <!-- Los nuevos comentarios se agregarán aquí -->
                    </div>
                </div>
            </div>
        `;
    }

    function renderAulas() {
        return `
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-vita-blue-dark mb-6 text-center">Conoce nuestras aulas</h2>
                <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                    Nuestras aulas son unidades móviles totalmente equipadas, diseñadas para llevar la capacitación directamente a tu comunidad. Cada unidad está adaptada para un oficio específico, asegurando que tengas las herramientas y el espacio adecuados para un aprendizaje práctico y seguro.
                </p>
                
                <div class="grid md:grid-cols-2 gap-8 items-center mb-10">
                    <div>
                        <h3 class="text-2xl font-semibold text-vita-blue-dark mb-3">Diseñadas para el Aprendizaje</h3>
                        <p class="text-gray-700 leading-relaxed mb-4">
                            No son simples camiones; son salones de clase sobre ruedas. Contamos con todo lo necesario para simular un entorno de trabajo real.
                        </p>
                        <ul class="list-disc ml-6 text-gray-700 space-y-2">
                            <li><strong>Equipamiento completo:</strong> Herramientas, maquinaria y mobiliario para cada taller.</li>
                            <li><strong>Seguridad primero:</strong> Instalaciones eléctricas seguras, ventilación adecuada y equipo de protección.</li>
                            <li><strong>Espacio versátil:</strong> Adaptables para teoría y práctica intensiva.</li>
                            <li><strong>Accesibles:</strong> Llevamos la oportunidad educativa hasta tu localidad, eliminando barreras de transporte.</li>
                        </ul>
                    </div>
                    <div class="rounded-lg overflow-hidden shadow-lg">
                        <img src="https://i.postimg.cc/NfBWJjnw/aulajardineria-jpg.jpg" alt="Foto interior de un aula móvil de VITA con herramientas de jardinería y plomería" class="w-full h-auto object-cover" onerror="this.src='https://placehold.co/600x400/f0f0f0/333?text=Aula+Móvil+VITA'; this.onerror=null;">
                    </div>
                </div>

                <h3 class="text-2xl font-bold text-vita-blue-dark mb-6 text-center">Un Vistazo al Interior</h3>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <img src="https://i.postimg.cc/NF5rBcJ9/aulaalbanileria.jpg" alt="Interior del taller de Albañilería y Carpintería" class="w-full h-48 object-cover rounded-md mb-3" onerror="this.src='https://placehold.co/600x400/f0f0f0/333?text=Taller+Oficios'; this.onerror=null;">
                        <h4 class="font-semibold text-lg text-gray-800">Talleres de Oficios</h4>
                        <p class="text-sm text-gray-600">Bancos de trabajo, herramientas de albañilería, plomería y electricidad.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <img src="https://i.postimg.cc/3NsWhD0f/aulasalud.jpg" alt="Interior del taller de Enfermería" class="w-full h-48 object-cover rounded-md mb-3" onerror="this.src='https://placehold.co/600x400/f0f0f0/333?text=Taller+Salud'; this.onerror=null;">
                        <h4 class="font-semibold text-lg text-gray-800">Salud y Cuidado</h4>
                        <p class="text-sm text-gray-600">Camillas, equipo de signos vitales y material de primeros auxilios.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <img src="https://i.postimg.cc/KY0zzWg1/aulaconfeccion.jpg" alt="Interior del taller de Costura y Estilismo" class="w-full h-48 object-cover rounded-md mb-3" onerror="this.src='https://placehold.co/600x400/f0f0f0/333?text=Taller+Diseño'; this.onerror=null;">
                        <h4 class="font-semibold text-lg text-gray-800">Diseño y Confección</h4>
                        <p class="text-sm text-gray-600">Máquinas de coser, espejos de estilista y estaciones de trabajo.</p>
                    </div>
                </div>
            </div>
        `;
    }

    // --- LÓGICA DE LA APLICACIÓN ---
    const contentContainer = document.getElementById('content-container');
    let currentTab = 'inicio'; 
    const tabRenderers = {
        'inicio': renderInicio,
        'cursos': renderCursos,
        'ruta': renderRuta,
        'duracion': renderDuracion,
        'certificaciones': renderCertificaciones,
        'aulas': renderAulas,
        'comentarios': renderComentarios,
        'registro': renderRegistro,
    };

    function switchTab(tabName) {
        // Ocultar el menú en móviles después de hacer clic (si aplica)
        // const navbar = document.getElementById('navbar');
        // navbar.classList.add('hidden'); // Si tuvieras un menú hamburguesa
        
        currentTab = tabName;
        
        document.querySelectorAll('.tab-button').forEach(btn => {
            if (btn.getAttribute('data-tab') === tabName) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        const renderer = tabRenderers[tabName];
        if (renderer) {
            contentContainer.innerHTML = renderer();
        }

        // Adjuntar listeners específicos de la pestaña recién renderizada
        if (tabName === 'cursos') {
            attachAccordionListeners('curriculum-accordion', 'accordion-header');
        } else if (tabName === 'ruta') {
            attachAccordionListeners('municipios-container', 'ruta-header');
        } else if (tabName === 'registro') {
            attachFormListener('registration-form', 'message-box');
        } else if (tabName === 'comentarios') { 
            attachCommentFormListener();
        }
    }

    function attachAccordionListeners(containerId, headerClass) {
        const container = document.getElementById(containerId);
        if (!container) return;

        container.querySelectorAll(`.${headerClass}`).forEach(header => {
            header.addEventListener('click', () => {
                const targetId = header.getAttribute('data-target');
                const content = document.getElementById(`content-${targetId.toLowerCase().replace(/\s/g, '-')}`); 
                const icon = header.querySelector('svg');
                
                if (!content) return;
                
                // Lógica para cerrar otros acordeones si se desea (modo "solo uno abierto")
                // ... (omitido para mantener la simplicidad, múltiples pueden estar abiertos)
                
                content.classList.toggle('active');
                if(icon) icon.classList.toggle('rotated');
            });
        });
    }
    
    // Función de formulario genérica mejorada
    function attachFormListener(formId, messageBoxId) {
        const form = document.getElementById(formId);
        const messageBox = document.getElementById(messageBoxId);
        if (!form) return;
        
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            messageBox.classList.add('hidden');
            
            if (!form.checkValidity()) {
                // Mostrar mensaje de error de validación
                messageBox.className = 'p-3 rounded-md text-sm text-center font-medium bg-red-100 text-red-700';
                messageBox.textContent = 'Por favor, completa todos los campos requeridos correctamente.';
                messageBox.classList.remove('hidden');
                return;
            }
            
            const formData = new FormData(form);
            const nombre = formData.get('nombre');
            
            // Simulación de envío exitoso
            console.log(`Formulario ${formId} enviado:`, Object.fromEntries(formData));
            
            messageBox.className = 'p-3 rounded-md text-sm text-center font-medium bg-green-100 text-green-700';
            messageBox.textContent = `¡Registro exitoso! Gracias, ${nombre ? nombre.split(' ')[0] : 'por registrarte'}. Hemos recibido tus datos.`;
            messageBox.classList.remove('hidden');

            form.reset();
        });
    }

    function attachCommentFormListener() {
        const form = document.getElementById('comment-form');
        const messageBox = document.getElementById('comment-message-box');
        const commentsList = document.getElementById('comments-list');
        if (!form) return;
        
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            messageBox.classList.add('hidden');
            
            if (!form.checkValidity()) {
                messageBox.className = 'p-3 rounded-md text-sm text-center font-medium bg-red-100 text-red-700';
                messageBox.textContent = 'Por favor, completa todos los campos.';
                messageBox.classList.remove('hidden');
                return;
            }
            
            const formData = new FormData(form);
            const nombre = formData.get('nombre');
            const comentario = formData.get('comentario');
            
            // Simulación de envío
            console.log(`Comentario de ${nombre}: ${comentario}`);
            
            messageBox.className = 'p-3 rounded-md text-sm text-center font-medium bg-green-100 text-green-700';
            messageBox.textContent = `¡Gracias por tu comentario, ${nombre.split(' ')[0]}! Lo hemos recibido.`;
            messageBox.classList.remove('hidden');
            
            // Sanitizar la entrada antes de mostrarla
            const safeNombre = nombre.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            const safeComentario = comentario.replace(/</g, "&lt;").replace(/>/g, "&gt;");

            const newComment = document.createElement('div');
            newComment.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200 animate-pulse'; 
            newComment.innerHTML = `
                <p class="text-sm text-gray-700" style="word-wrap: break-word;">${safeComentario}</p>
                <p class="text-xs text-gray-500 font-medium mt-2">- ${safeNombre}</p>
            `;
            
            // Insertar al principio de la lista
            commentsList.prepend(newComment);
            
            // Quitar animación después de un momento
            setTimeout(() => newComment.classList.remove('animate-pulse'), 500); 
            
            form.reset();
        });
    }

    // --- LÓGICA DEL CHATBOT - BASE DE CONOCIMIENTO DE LA PÁGINA ---
    function getBotResponse(userInput) {
        const input = userInput.toLowerCase().trim();
        
        // Citas de los datos de la página para respuestas específicas
        const allCourses = Object.values(curriculums).map(c => c.title);
        const courseKeys = Object.keys(curriculums); 
        const allMunicipalities = routeData.map(r => r.name);

        // --- 1. Respuestas de Saludo y Despedida ---
        if (input.includes('hola') || input.includes('buenos días') || input.includes('saludos') || input.includes('buen día')) {
            return '¡Hola! Soy el asistente VITA, tu guía de información. Estoy aquí para resolver tus dudas sobre **Cursos**, **Horarios**, **Rutas** o **Certificaciones**.';
        }
        if (input.includes('gracias') || input.includes('adiós') || input.includes('chao') || input.includes('listo')) {
            return '¡De nada! Ha sido un placer ayudarte. ¡Que tengas un gran día! Siempre puedes volver a abrirme si tienes más dudas.';
        }
        
        // --- 2. Cursos, Malla Curricular y Oficios (ALTA PRIORIDAD) ---
        
        // A. Check for specific existing course name (Highest priority)
        let specificCourseFound = null;
        for (const courseKey of courseKeys) {
            const courseTitleLower = curriculums[courseKey].title.toLowerCase();
            // Check if the input contains the key, or the full title, or the first word of the title
            if (input.includes(courseKey) || 
                input.includes(courseTitleLower) ||
                (courseTitleLower.split(' ').length > 1 && input.includes(courseTitleLower.split(' ')[0]))) {
                specificCourseFound = curriculums[courseKey];
                break;
            }
        }
        
        if (specificCourseFound) {
            const modules = specificCourseFound.modules.map(m => m.name).join('; ');
            return `El curso de **${specificCourseFound.title}** dura **5 meses**. Se enfoca en: ${specificCourseFound.description}. Sus módulos principales son: ${modules}. Revisa la pestaña "Cursos y Malla" para ver el detalle de los temas.`;
        }

        // B. Check for missing course (e.g., mecánica)
        const missingCourseKeywords = ['mecanica', 'cocina', 'herreria', 'soldadura', 'reposteria', 'computacion'];
        if (missingCourseKeywords.some(keyword => input.includes(keyword))) {
             const requestedCourse = missingCourseKeywords.find(keyword => input.includes(keyword)) || 'ese oficio';
             return `Actualmente no ofrecemos el curso de **${requestedCourse.charAt(0).toUpperCase() + requestedCourse.slice(1)}**, pero tenemos otros oficios de alta demanda: **${allCourses.join(', ')}**. Todos duran 5 meses.`;
        }
        
        // C. Check for general course inquiry
        const generalSynonyms = ['cursos', 'oficios', 'taller', 'malla', 'currículum', 'enseñan', 'imparten', 'información', 'detalles', 'aprender'];
        if (generalSynonyms.some(word => input.includes(word))) {
            return `Actualmente ofrecemos los siguientes oficios: **${allCourses.join(', ')}**. Todos duran **5 meses** y se imparten 3 veces por semana. Puedes ver el detalle de cada uno en la pestaña "Cursos y Malla".`;
        }

        // --- 3. Duración y Horarios ---
        const timeSynonyms = ['duración', 'dura', 'horarios', 'tiempo', 'cuánto', 'frecuencia', 'días', 'horas'];
        if (timeSynonyms.some(word => input.includes(word))) {
            return 'Cada curso tiene una duración de **5 meses**, con **3 sesiones de 2 horas por semana**. Los horarios son principalmente **vespertinos** o los **sábados** por la mañana (por ejemplo, L/M/V de 6 PM a 8 PM). Puedes ver los detalles en la pestaña "Duración y Horarios".';
        }

        // --- 4. Ruta y Ubicación ---
        const routeSynonyms = ['ruta', 'municipios', 'dónde', 'ubicación', 'comunidades', 'localidades', 'irán', 'viajan', 'lugares'];
        if (routeSynonyms.some(word => input.includes(word))) {
            // Si pregunta por un municipio específico
                for (const municipality of allMunicipalities) {
                    // Intenta hacer coincidir la primera palabra del municipio
                    if (input.includes(municipality.toLowerCase().split(' ')[0])) {
                        const data = routeData.find(r => r.name === municipality);
                        if (data) {
                            const locations = data.locations.map(l => l.name).join(', ');
                            return `¡Sí! El municipio de **${municipality}** está en la ruta. La estancia es de 5 meses y visitaremos las localidades de: ${locations}. Consulta la pestaña "Rutas y municipios".`;
                        }
                    }
                }
            // Si pregunta por la ruta en general
            return `Nuestra ruta visitará los siguientes municipios: **${allMunicipalities.join(', ')}**. La permanencia en cada municipio es de **5 meses**.`;
        }

        // --- 5. Certificaciones y Validez ---
        const certSynonyms = ['certificado', 'validez', 'papel', 'documento', 'oficial', 'reconocimiento', 'conocer', 'sep'];
        if (certSynonyms.some(word => input.includes(word))) {
            return '¡Claro! Nuestra certificación es **oficial y tiene validez nacional**. Está avalada por **CONOCER** (que depende de la **SEP**). Al finalizar el curso, realizarás una evaluación práctica y, si demuestras tu competencia, recibirás un certificado oficial. Puedes leer todos los detalles en la pestaña "Certificaciones".';
        }

        // --- 6. Registro e Inscripción ---
        const registerSynonyms = ['registro', 'inscribirme', 'apuntarme', 'voluntario', 'tallerista', 'costo', 'precio', 'gratis'];
        if (registerSynonyms.some(word => input.includes(word))) {
            let response = 'Puedes pre-registrarte en la pestaña "**¡Regístrate!**" como **Participante**, **Tallerista** o **Voluntario**.';
            if (input.includes('costo') || input.includes('precio') || input.includes('gratis')) {
                response += ' El proyecto VITA es una iniciativa social, por lo que la participación es **totalmente gratuita** para los miembros de las comunidades visitadas.';
            }
            return response;
        }
        
        // --- 7. Respuesta por Defecto ---
        return 'Disculpa, esa pregunta no está en mi base de conocimiento. Por favor, intenta preguntar con palabras clave sobre nuestros **cursos**, **horarios**, **ruta** o **municipios**.';
    }

    // 2. Función para adjuntar los listeners del chatbot
    function attachChatbotListeners() {
        const chatButton = document.getElementById('chat-button');
        const chatWindow = document.getElementById('chat-window');
        const closeChat = document.getElementById('close-chat');
        const messagesContainer = document.getElementById('chat-messages');
        const input = document.getElementById('chat-input');
        const sendButton = document.getElementById('chat-send');

        // Abrir y cerrar el chat
        chatButton.addEventListener('click', () => chatWindow.classList.toggle('hidden'));
        closeChat.addEventListener('click', () => chatWindow.classList.add('hidden'));

        // Función para enviar mensaje
        const sendMessage = () => {
            const userInput = input.value;
            if (userInput.trim() === '') return;

            // 1. Mostrar mensaje del usuario (Sanitizado)
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message user';
            userMessage.textContent = userInput; // Usar textContent previene XSS
            messagesContainer.appendChild(userMessage);
            
            // 2. Obtener y mostrar respuesta del bot
            const botResponse = getBotResponse(userInput);
            
            // Simular que el bot "piensa"
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'chat-message bot';
                
                // Convertir texto de Markdown simple (negritas) a HTML de forma segura
                botMessage.innerHTML = botResponse
                    .replace(/</g, "&lt;").replace(/>/g, "&gt;") // Escapar HTML primero
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Aplicar negritas
                
                messagesContainer.appendChild(botMessage);
                
                // Scroll al final
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 500);

            // 3. Limpiar input
            input.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        };

        // Enviar con botón
        sendButton.addEventListener('click', sendMessage);
        
        // Enviar con "Enter"
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); // Prevenir salto de línea en input
                sendMessage();
            }
        });
    }

    // Inicialización: Cargar la pestaña de inicio y configurar oyentes de botones
    document.addEventListener('DOMContentLoaded', () => {
        // Inicializar la pestaña
        switchTab(currentTab);

        // Agregar oyentes de clic a los botones de navegación
        document.getElementById('navbar').addEventListener('click', (e) => {
            if (e.target.matches('.tab-button')) {
                const tabName = e.target.getAttribute('data-tab');
                if(tabName) {
                    switchTab(tabName);
                }
            }
        });

        // Inicializar el Chatbot
        attachChatbotListeners();
    });
</script>
</body>
</html>

